{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport React, { Component } from 'react';\nimport { auth, db } from \"../firebase/config\";\nimport MiCamara from \"../components/MiCamara\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar NewPost = function (_Component) {\n  _inherits(NewPost, _Component);\n\n  var _super = _createSuper(NewPost);\n\n  function NewPost(props) {\n    var _this;\n\n    _classCallCheck(this, NewPost);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      message: '',\n      mostrarComponenteCamara: true,\n      urlFoto: ''\n    };\n    return _this;\n  }\n\n  _createClass(NewPost, [{\n    key: \"cuandoSubaLaImagen\",\n    value: function cuandoSubaLaImagen(url) {\n      console.log(url);\n      this.setState({\n        mostrarComponenteCamara: false,\n        urlFoto: url\n      });\n    }\n  }, {\n    key: \"newPost\",\n    value: function newPost(message, urlFoto) {\n      db.collection('posts').add({\n        owner: auth.currentUser.email,\n        likes: [],\n        foto: urlFoto,\n        createdAt: Date.now(),\n        message: message\n      }).then(function (response) {\n        return console.log(response);\n      }).catch(function (error) {\n        return console.log(error.message);\n      });\n    }\n  }, {\n    key: \"borrarPost\",\n    value: function borrarPost() {\n      var _this2 = this;\n\n      db.collection('posts').where('createdAt', '==', this.props.postData.data.createdAt).onSnapshot(function (docs) {\n        console.log(docs);\n        docs.forEach(function (doc) {\n          doc.ref.delete();\n        });\n\n        _this2.toggleAlert(false);\n\n        _this2.setState({\n          display: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return _jsx(View, {\n        children: this.state.mostrarComponenteCamara ? _jsx(MiCamara, {\n          cuandoSubaLaImagen: function cuandoSubaLaImagen(url) {\n            return _this3.cuandoSubaLaImagen(url);\n          }\n        }) : _jsxs(_Fragment, {\n          children: [_jsx(Text, {\n            children: \"Agregar un comentario\"\n          }), _jsx(TextInput, {\n            style: styles.textarea,\n            onChangeText: function onChangeText(text) {\n              return _this3.setState({\n                message: text\n              });\n            },\n            value: this.state.message\n          }), _jsx(TouchableOpacity, {\n            style: styles.btn,\n            onPress: function onPress() {\n              _this3.newPost(_this3.state.message, _this3.state.urlFoto);\n\n              _this3.setState({\n                message: ''\n              });\n\n              _this3.props.navigation.navigate('Home');\n            },\n            children: _jsx(Text, {\n              children: \"Enviar mensaje\"\n            })\n          })]\n        })\n      });\n    }\n  }]);\n\n  return NewPost;\n}(Component);\n\nvar styles = StyleSheet.create({\n  textarea: {\n    borderWidth: 1,\n    borderColor: '#c3c3c3',\n    height: 'auto',\n    minHeight: 60,\n    marginTop: 10\n  },\n  btn: {\n    marginTop: 16,\n    borderColor: 'red',\n    borderWidth: 1\n  }\n});\nexport default NewPost;","map":{"version":3,"names":["React","Component","auth","db","MiCamara","NewPost","props","state","message","mostrarComponenteCamara","urlFoto","url","console","log","setState","collection","add","owner","currentUser","email","likes","foto","createdAt","Date","now","then","response","catch","error","where","postData","data","onSnapshot","docs","forEach","doc","ref","delete","toggleAlert","display","cuandoSubaLaImagen","styles","textarea","text","btn","newPost","navigation","navigate","StyleSheet","create","borderWidth","borderColor","height","minHeight","marginTop"],"sources":["/Users/cmdealvear/Desktop/programación/prog3/ProyectoFinal/ProyectoFinal/src/screens/NewPost.js"],"sourcesContent":["import { View, Text, TextInput, StyleSheet, TouchableOpacity } from 'react-native'\nimport React, {Component} from 'react'\nimport { auth, db } from '../firebase/config';\nimport  MiCamara from '../components/MiCamara'\n\n\n\nclass NewPost extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            message:'',\n            mostrarComponenteCamara: true,\n            urlFoto:''\n        }\n    }\n\n    cuandoSubaLaImagen(url){\n        console.log(url)\n        this.setState({\n            mostrarComponenteCamara:false,\n            urlFoto: url\n        })\n    }\n\n    newPost(message, urlFoto){\n        db.collection('posts').add({\n            owner: auth.currentUser.email,\n            likes:[],\n            foto:urlFoto,\n            createdAt: Date.now(),\n            message:message,\n        })\n        .then(response => console.log(response))\n        .catch(error => console.log(error.message))\n    }\n\n    borrarPost(){\n        db.collection('posts').where('createdAt','==',this.props.postData.data.createdAt)\n        .onSnapshot(\n            docs => {\n              console.log(docs);\n              docs.forEach( doc => {\n                doc.ref.delete()\n              })\n              this.toggleAlert(false);\n              this.setState({\n                  display:false,\n              })\n            }\n          ) \n    \n    }\n\n    render(){\n\n        return (\n            <View>\n                {this.state.mostrarComponenteCamara ?\n                <MiCamara cuandoSubaLaImagen={(url)=> this.cuandoSubaLaImagen(url)}/>\n                :<>\n                    <Text>Agregar un comentario</Text>\n                    <TextInput \n                    style={styles.textarea}\n                    onChangeText= {(text)=> this.setState({\n                        message: text\n                    })}\n                    value={this.state.message}\n                    />\n                    <TouchableOpacity\n                        style={styles.btn}\n                        onPress={() => {\n                            this.newPost(this.state.message, this.state.urlFoto)\n                            this.setState({\n                                message:'',\n                            })\n                            this.props.navigation.navigate('Home')\n                        }}\n                    >\n                        <Text>Enviar mensaje</Text>\n                    </TouchableOpacity>\n                </>\n                    }\n            </View>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    textarea:{\n        borderWidth:1,\n        borderColor:'#c3c3c3',\n        height:'auto',\n        minHeight:60,\n        marginTop:10\n    },\n    btn:{\n        marginTop:16,\n        borderColor:'red',\n        borderWidth:1\n    }\n})\n\nexport default NewPost"],"mappings":"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"},"metadata":{},"sourceType":"module"}